<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta charset="UTF-8">
<meta property="og:title" content="Traditional Animator Indonesia" />
<meta property="og:description" content="Artikel" />
<meta property="og:image" content="https://traditionalanimatorindonesia.github.io/assets/img/icon.png" />


<title>Artikel</title>
<link rel="stylesheet" href="../../assets/css/fp_style.css" type="text/css">
<link rel="stylesheet" href="../../assets/css/style.css"> 
<link rel="stylesheet" href="assets/bluesky-comments.css"> <!-- Load widget styles LAST -->
<link rel="stylesheet" type="text/css" href="https://unpkg.com/@phosphor-icons/web@2.1.1/src/duotone/style.css" />

<!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>-->
<script src="../../assets/javascript/jquery.js"></script>
<script> 
    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);
    Title = urlParams.get('title'); // Replace 'parameterName'
    TitleFile = "https://raw.githubusercontent.com/traditionalanimatorindonesia/Articles/refs/heads/main/"+String(Title)+".html";

    $(function(){
      $("#LoadHTML").load(TitleFile);
    });
    
    jsonFile = "https://raw.githubusercontent.com/traditionalanimatorindonesia/Articles/refs/heads/main/"+String(Title)+".json";
    fetch(jsonFile)
    .then(response => response.json())
    .then(data => {
    Judul = document.getElementById('Judul');
    Judul.innerText = data["judul"];
    Nama.innerText = data["nama"];
    Tanggal.innerText = data["tanggal"];
    Nama.href = data["link"];
    })
    
    </script> 
</head>
<body>
<!-- ▼全体の囲み▼ -->
<div id="wrapper">

<div id="main-wrap"> 
<div id="contents">

<h2 id="Judul">Judul</h2>
<!--<div class="txt">20**/01/01 up</div>-->
<h3>Ditulis oleh <a id="Nama">Nama</a> (<i id="Tanggal"></i>)</h3>

<p>
<div id="LoadHTML"></div>
</p>




    <div class="widget-wrapper">
        <!--
          THIS IS THE TARGET CONTAINER
          Give it a unique ID. The JavaScript function `loadAndRenderComments`
          will populate this div.
        -->
        <div id="bluesky-comment-widget">
            <!-- Content will be loaded here by JS -->
            <p><i>Loading Bluesky comments...</i></p>
        </div>

    </div>

    <!-- Include the component's JavaScript AFTER the container div -->
    <script src="assets/bluesky-comments.js"></script>

    <!-- Initialize the script -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            jsonFile = "https://raw.githubusercontent.com/traditionalanimatorindonesia/Articles/refs/heads/main/"+String(Title)+".json";
            fetch(jsonFile)
            .then(response => response.json())
            .then(data => {
            const targetContainerId = 'bluesky-comment-widget';
            // How to Get the URI https://web-apps.thecoatlessprofessor.com/bluesky/profile-or-post-to-did-at-uri-app/index.html
            const blueskyPostUri = data["komentar"];
            if (typeof loadAndRenderComments === 'function') {
                loadAndRenderComments(targetContainerId, blueskyPostUri);
            } else {
                console.error("Error: loadAndRenderComments function not found. Ensure bluesky-comments.js is loaded correctly.");
                const container = document.getElementById(targetContainerId);
                if (container) {
                    container.innerHTML = '<p class="bsky-comments-error">Error loading comments component.</p>';
                }
            }
        });})
    </script>

</body>
</html>
